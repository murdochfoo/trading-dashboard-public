<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FRED Macro Trading - RAG Compliant Real Results</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            overflow-x: auto;
        }
        
        .container {
            max-width: 1900px;
            margin: 0 auto;
            min-width: 1400px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .success-banner {
            background: #28a745;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
        }
        
        .tabs {
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .tab-buttons {
            display: flex;
            background: #f5f5f5;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .tab-button {
            flex: 1;
            padding: 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            color: #666;
            transition: all 0.3s ease;
        }
        
        .tab-button:hover {
            background: #ebebeb;
        }
        
        .tab-button.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }
        
        .tab-content {
            display: none;
            padding: 30px;
            position: relative;
            overflow-x: auto;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .strategy-count {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 10px 15px;
            margin-bottom: 15px;
            font-weight: 600;
            color: #495057;
            text-align: center;
        }
        
        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 0.9em;
            table-layout: auto;
        }
        
        /* Benchmark row styling */
        .benchmark-row {
            background: #fff3cd !important;
            border: 2px solid #ffeaa7 !important;
            font-weight: bold;
        }
        
        .benchmark-row td {
            background: #fff3cd !important;
            border-color: #ffeaa7 !important;
        }
        
        /* Resizable columns */
        .results-table th {
            background: #f8f9fa;
            padding: 12px 8px;
            text-align: center;
            font-weight: 600;
            color: #333;
            border-bottom: 2px solid #dee2e6;
            white-space: nowrap;
            position: sticky;
            top: 0;
            z-index: 10;
            resize: horizontal;
            overflow: hidden;
            cursor: col-resize;
            border-right: 2px solid #ccc;
        }
        
        /* Sortable headers */
        .results-table th.sortable {
            cursor: pointer;
            user-select: none;
            position: relative;
        }
        
        .results-table th.sortable:hover {
            background: #e9ecef;
        }
        
        .results-table th.sortable::after {
            content: "‚áÖ";
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            opacity: 0.3;
        }
        
        .results-table th.sortable.asc::after {
            content: "‚Üë";
            opacity: 1;
        }
        
        .results-table th.sortable.desc::after {
            content: "‚Üì";
            opacity: 1;
        }
        
        .results-table td {
            padding: 10px 8px;
            text-align: center;
            border-bottom: 1px solid #dee2e6;
            white-space: nowrap;
            border-right: 1px solid #eee;
        }
        
        .results-table tbody tr:hover {
            background-color: #f8f9fa;
        }
        
        .positive { color: #28a745; font-weight: 600; }
        .negative { color: #dc3545; font-weight: 600; }
        
        .analysis-period {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.1em;
            color: #1976d2;
            border-left: 5px solid #2196f3;
        }
        
        .base-amount {
            font-weight: bold;
            color: #4caf50;
        }
        
        /* Enhanced Tooltip Styles */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
            border-bottom: 1px dotted #333;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 350px;
            background-color: #333;
            color: #fff;
            text-align: left;
            border-radius: 6px;
            padding: 12px;
            position: absolute;
            z-index: 1000;
            bottom: 125%;
            left: 120%;
            margin-left: -10px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85em;
            line-height: 1.4;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 10px;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #333 transparent transparent transparent;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        .sub-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
            margin-bottom: 20px;
        }
        
        .sub-tab-button {
            flex: 1;
            padding: 15px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 500;
            color: #666;
            transition: all 0.3s ease;
        }
        
        .sub-tab-button:hover {
            background: #e9ecef;
        }
        
        .sub-tab-button.active {
            background: white;
            color: #667eea;
            border-bottom: 2px solid #667eea;
        }
        
        .sub-tab-content {
            display: none;
        }
        
        .sub-tab-content.active {
            display: block;
        }
        
        /* Sub-sub-tabs styling for clustering methods */
        .sub-sub-tabs {
            display: flex;
            background: #f1f3f4;
            border-radius: 8px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .sub-sub-tab-button {
            flex: 1;
            padding: 10px 15px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 500;
            color: #666;
            transition: all 0.3s ease;
        }
        
        .sub-sub-tab-button:hover {
            background: #e9ecef;
        }
        
        .sub-sub-tab-button.active {
            background: white;
            color: #495057;
            font-weight: 600;
        }
        
        .sub-sub-tab-content {
            display: none;
        }
        
        .sub-sub-tab-content.active {
            display: block;
        }
        
        
        
        /* Specific column widths for auto-fit */
        .macro-combination-table .indicators-used-col {
            width: 200px;
        }
        
        .macro-combination-table th:not(.indicators-used-col),
        .macro-combination-table td:not(.indicators-used-col) {
            width: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèÜ FRED Macro Trading Dashboard</h1>
            <p style="font-size: 1.2em; margin-bottom: 10px;">RAG-Compliant Real Performance Results</p>
        </div>
        
        <div class="success-banner">
            ‚úÖ <strong>Trading Dashboard:</strong> Macro Strategies: 120 Individual + 60 Combination + 96 ML strategies using FRED indicators | Technical SPY: 1000+ Individual technicals + 1000+ combinations on SPY data
        </div>
        
        <div class="tabs">
            <div class="tab-buttons">
                <button class="tab-button active" onclick="showTab('macro')">üèõÔ∏è Macro Strategies</button>
                <button class="tab-button" onclick="showTab('technical')">üìà Technical SPY</button>
                <button class="tab-button" onclick="showTab('orthogonal-combined')">‚ö° Orthogonal Combined</button>
            </div>
            
            <div id="macro" class="tab-content active">
                <div class="sub-tabs">
                    <button class="sub-tab-button active" onclick="showSubTab('macro', 'individual')">Individual Indicators</button>
                    <button class="sub-tab-button" onclick="showSubTab('macro', 'combination')">Combinations</button>
                    <button class="sub-tab-button" onclick="showSubTab('macro', 'ml')">ML Multi-Period</button>
                    <button class="sub-tab-button" onclick="showSubTab('macro', 'clustering')">üîç Clustering</button>
                    <button class="sub-tab-button" onclick="showSubTab('macro', 'orthogonal')">‚ö° Orthogonal</button>
                </div>
                
                <div id="macro-individual" class="sub-tab-content active">
                    <div class="strategy-count">üìä Displaying top 100 of 120 individual macro strategies</div>
                    <div class="analysis-period">
                        üìä <strong>Analysis Period:</strong> Jan 1, 2010 - Thu, Sep 4, 25 
                        &nbsp;&nbsp;|&nbsp;&nbsp; 
                        üí∞ <span class="base-amount">Starting Base: $10,000</span>
                    </div>
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th class="sortable" onclick="sortTable('individual', 0)">Indicator</th>
                                <th class="sortable" onclick="sortTable('individual', 1)">Transform</th>
                                <th class="sortable" onclick="sortTable('individual', 2)">Terminal Value</th>
                                <th class="sortable" onclick="sortTable('individual', 3)">Annual Return</th>
                                <th class="sortable" onclick="sortTable('individual', 4)">Volatility</th>
                                <th class="sortable" onclick="sortTable('individual', 5)">Max DD</th>
                                <th class="sortable" onclick="sortTable('individual', 6)">Sharpe</th>
                                <th class="sortable" onclick="sortTable('individual', 7)">Sortino</th>
                                <th class="sortable" onclick="sortTable('individual', 8)">Calmar</th>
                                <th class="sortable" onclick="sortTable('individual', 9)">Win Rate</th>
                                <th class="sortable" onclick="sortTable('individual', 10)">Total Trades</th>
                                <th class="sortable" onclick="sortTable('individual', 11)">Ave Trades/Yr</th>
                            </tr>
                        </thead>
                        <tbody id="individual-tbody"></tbody>
                    </table>
                </div>
                
                <div id="macro-combination" class="sub-tab-content">
                    <div class="strategy-count">üìä Displaying top 60 of 60 combination macro strategies</div>
                    <div class="analysis-period">
                        üìä <strong>Analysis Period:</strong> Jan 1, 2010 - Thu, Sep 4, 25 
                        &nbsp;&nbsp;|&nbsp;&nbsp; 
                        üí∞ <span class="base-amount">Starting Base: $10,000</span>
                    </div>
                    <table class="results-table macro-combination-table">
                        <thead>
                            <tr>
                                <th class="sortable" onclick="sortTable('combination', 0)">Strategy Name</th>
                                <th class="sortable indicators-used-col" onclick="sortTable('combination', 1)">Indicators Used</th>
                                <th class="sortable" onclick="sortTable('combination', 2)">Terminal Value</th>
                                <th class="sortable" onclick="sortTable('combination', 3)">Annual Return</th>
                                <th class="sortable" onclick="sortTable('combination', 4)">Volatility</th>
                                <th class="sortable" onclick="sortTable('combination', 5)">Max DD</th>
                                <th class="sortable" onclick="sortTable('combination', 6)">Sharpe</th>
                                <th class="sortable" onclick="sortTable('combination', 7)">Sortino</th>
                                <th class="sortable" onclick="sortTable('combination', 8)">Calmar</th>
                                <th class="sortable" onclick="sortTable('combination', 9)">Win Rate</th>
                                <th class="sortable" onclick="sortTable('combination', 10)">Total Trades</th>
                                <th class="sortable" onclick="sortTable('combination', 11)">Ave Trades/Yr</th>
                            </tr>
                        </thead>
                        <tbody id="combination-tbody"></tbody>
                    </table>
                </div>
                
                <div id="macro-ml" class="sub-tab-content">
                    <div class="strategy-count">üìä Displaying all 96 ML multi-period strategies</div>
                    <div class="analysis-period">
                        üìä <strong>Analysis Period:</strong> Jan 1, 2010 - Thu, Sep 4, 25 
                        &nbsp;&nbsp;|&nbsp;&nbsp; 
                        üí∞ <span class="base-amount">Starting Base: $10,000</span>
                    </div>
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th class="sortable" onclick="sortTable('ml', 0)">Model Name</th>
                                <th class="sortable" onclick="sortTable('ml', 1)">Holding Period</th>
                                <th class="sortable" onclick="sortTable('ml', 2)">Terminal Value</th>
                                <th class="sortable" onclick="sortTable('ml', 3)">Annual Return</th>
                                <th class="sortable" onclick="sortTable('ml', 4)">Volatility</th>
                                <th class="sortable" onclick="sortTable('ml', 5)">Max DD</th>
                                <th class="sortable" onclick="sortTable('ml', 6)">Sharpe</th>
                                <th class="sortable" onclick="sortTable('ml', 7)">Sortino</th>
                                <th class="sortable" onclick="sortTable('ml', 8)">Calmar</th>
                                <th class="sortable" onclick="sortTable('ml', 9)">Win Rate</th>
                                <th class="sortable" onclick="sortTable('ml', 10)">Total Trades</th>
                            </tr>
                        </thead>
                        <tbody id="ml-tbody"></tbody>
                    </table>
                </div>
                
                <div id="macro-clustering" class="sub-tab-content">
                    <div class="strategy-count">üîç Displaying clustering analysis across 302 FRED indicators</div>
                    <div class="analysis-period">
                        üìä <strong>Analysis Period:</strong> Jan 1, 2010 - Thu, Sep 4, 25 
                        &nbsp;&nbsp;|&nbsp;&nbsp; 
                        üí∞ <span class="base-amount">Starting Base: $10,000</span>
                    </div>
                    <div class="sub-sub-tabs">
                        <button class="sub-sub-tab-button active" onclick="showSubSubTab('macro-clustering', 'kmeans')">K-Means</button>
                        <button class="sub-sub-tab-button" onclick="showSubSubTab('macro-clustering', 'minibatchkmeans')">Mini-Batch K-Means</button>
                        <button class="sub-sub-tab-button" onclick="showSubSubTab('macro-clustering', 'hierarchical')">Hierarchical</button>
                        <button class="sub-sub-tab-button" onclick="showSubSubTab('macro-clustering', 'agglomerativeclustering')">Agglomerative</button>
                        <button class="sub-sub-tab-button" onclick="showSubSubTab('macro-clustering', 'dbscan')">DBSCAN</button>
                        <button class="sub-sub-tab-button" onclick="showSubSubTab('macro-clustering', 'hdbscan')">HDBSCAN</button>
                        <button class="sub-sub-tab-button" onclick="showSubSubTab('macro-clustering', 'optics')">OPTICS</button>
                        <button class="sub-sub-tab-button" onclick="showSubSubTab('macro-clustering', 'spectralclustering')">Spectral</button>
                        <button class="sub-sub-tab-button" onclick="showSubSubTab('macro-clustering', 'meanshift')">Mean Shift</button>
                        <button class="sub-sub-tab-button" onclick="showSubSubTab('macro-clustering', 'affinitypropagation')">Affinity Prop</button>
                        <button class="sub-sub-tab-button" onclick="showSubSubTab('macro-clustering', 'birch')">BIRCH</button>
                        <button class="sub-sub-tab-button" onclick="showSubSubTab('macro-clustering', 'bisectingkmeans')">Bisecting K-Means</button>
                    </div>
                    
                    <div id="macro-clustering-kmeans" class="sub-sub-tab-content active">
                        <table class="results-table">
                            <thead>
                                <tr>
                                    <th class="sortable" onclick="sortTable('macro-clustering-kmeans', 0)">Cluster Strategy</th>
                                    <th class="sortable" onclick="sortTable('macro-clustering-kmeans', 1)">Clusters</th>
                                    <th class="sortable" onclick="sortTable('macro-clustering-kmeans', 2)">Dimensions</th>
                                    <th class="sortable" onclick="sortTable('macro-clustering-kmeans', 3)">Terminal Value</th>
                                    <th class="sortable" onclick="sortTable('macro-clustering-kmeans', 4)">Annual Return</th>
                                    <th class="sortable" onclick="sortTable('macro-clustering-kmeans', 5)">Volatility</th>
                                    <th class="sortable" onclick="sortTable('macro-clustering-kmeans', 6)">Max DD</th>
                                    <th class="sortable" onclick="sortTable('macro-clustering-kmeans', 7)">Sharpe</th>
                                    <th class="sortable" onclick="sortTable('macro-clustering-kmeans', 8)">Sortino</th>
                                    <th class="sortable" onclick="sortTable('macro-clustering-kmeans', 9)">Calmar</th>
                                    <th class="sortable" onclick="sortTable('macro-clustering-kmeans', 10)">Win Rate</th>
                                    <th class="sortable" onclick="sortTable('macro-clustering-kmeans', 11)">Total Trades</th>
                                </tr>
                            </thead>
                            <tbody id="macro-clustering-kmeans-tbody"></tbody>
                        </table>
                    
                
                <div id="macro-clustering-hierarchical" class="sub-sub-tab-content">
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th class="sortable" onclick="sortTable('macro-clustering-hierarchical', 0)">Cluster Strategy</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-hierarchical', 1)">Configuration</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-hierarchical', 2)">Dimensions</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-hierarchical', 3)">Terminal Value</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-hierarchical', 4)">Annual Return</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-hierarchical', 5)">Volatility</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-hierarchical', 6)">Max DD</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-hierarchical', 7)">Sharpe</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-hierarchical', 8)">Sortino</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-hierarchical', 9)">Calmar</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-hierarchical', 10)">Win Rate</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-hierarchical', 11)">Total Trades</th>
                            </tr>
                        </thead>
                        <tbody id="macro-clustering-hierarchical-tbody"></tbody>
                    </table>
                </div>
                
                <div id="macro-clustering-pca" class="sub-sub-tab-content">
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th class="sortable" onclick="sortTable('macro-clustering-pca', 0)">Cluster Strategy</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-pca', 1)">Configuration</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-pca', 2)">Dimensions</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-pca', 3)">Terminal Value</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-pca', 4)">Annual Return</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-pca', 5)">Volatility</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-pca', 6)">Max DD</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-pca', 7)">Sharpe</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-pca', 8)">Sortino</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-pca', 9)">Calmar</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-pca', 10)">Win Rate</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-pca', 11)">Total Trades</th>
                            </tr>
                        </thead>
                        <tbody id="macro-clustering-pca-tbody"></tbody>
                    </table>
                </div>
                
                <div id="macro-clustering-dbscan" class="sub-sub-tab-content">
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th class="sortable" onclick="sortTable('macro-clustering-dbscan', 0)">Cluster Strategy</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-dbscan', 1)">Configuration</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-dbscan', 2)">Dimensions</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-dbscan', 3)">Terminal Value</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-dbscan', 4)">Annual Return</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-dbscan', 5)">Volatility</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-dbscan', 6)">Max DD</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-dbscan', 7)">Sharpe</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-dbscan', 8)">Sortino</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-dbscan', 9)">Calmar</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-dbscan', 10)">Win Rate</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-dbscan', 11)">Total Trades</th>
                            </tr>
                        </thead>
                        <tbody id="macro-clustering-dbscan-tbody"></tbody>
                    </table>
                </div>
                
                <div id="macro-clustering-gaussian" class="sub-sub-tab-content">
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th class="sortable" onclick="sortTable('macro-clustering-gaussian', 0)">Cluster Strategy</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-gaussian', 1)">Configuration</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-gaussian', 2)">Dimensions</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-gaussian', 3)">Terminal Value</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-gaussian', 4)">Annual Return</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-gaussian', 5)">Volatility</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-gaussian', 6)">Max DD</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-gaussian', 7)">Sharpe</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-gaussian', 8)">Sortino</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-gaussian', 9)">Calmar</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-gaussian', 10)">Win Rate</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-gaussian', 11)">Total Trades</th>
                            </tr>
                        </thead>
                        <tbody id="macro-clustering-gaussian-tbody"></tbody>
                    </table>
                </div>
                
                <div id="macro-clustering-spectral" class="sub-sub-tab-content">
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th class="sortable" onclick="sortTable('macro-clustering-spectral', 0)">Cluster Strategy</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-spectral', 1)">Configuration</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-spectral', 2)">Dimensions</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-spectral', 3)">Terminal Value</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-spectral', 4)">Annual Return</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-spectral', 5)">Volatility</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-spectral', 6)">Max DD</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-spectral', 7)">Sharpe</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-spectral', 8)">Sortino</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-spectral', 9)">Calmar</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-spectral', 10)">Win Rate</th>
                                <th class="sortable" onclick="sortTable('macro-clustering-spectral', 11)">Total Trades</th>
                            </tr>
                        </thead>
                        <tbody id="macro-clustering-spectral-tbody"></tbody>
                    </table>
                </div>
                </div>
                </div>
                
                <div id="macro-orthogonal" class="sub-tab-content">
                    <div class="strategy-count">‚ö° Displaying orthogonal combinations from all macro analysis</div>
                    <div class="analysis-period">
                        üìä <strong>Analysis Period:</strong> Jan 1, 2010 - Thu, Sep 4, 25 
                        &nbsp;&nbsp;|&nbsp;&nbsp; 
                        üí∞ <span class="base-amount">Starting Base: $10,000</span>
                    </div>
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th class="sortable" onclick="sortTable('macro-orthogonal', 0)">Orthogonal Strategy</th>
                                <th class="sortable" onclick="sortTable('macro-orthogonal', 1)">Sources</th>
                                <th class="sortable" onclick="sortTable('macro-orthogonal', 2)">Dimensions</th>
                                <th class="sortable" onclick="sortTable('macro-orthogonal', 3)">Correlation</th>
                                <th class="sortable" onclick="sortTable('macro-orthogonal', 4)">Terminal Value</th>
                                <th class="sortable" onclick="sortTable('macro-orthogonal', 5)">Annual Return</th>
                                <th class="sortable" onclick="sortTable('macro-orthogonal', 6)">Volatility</th>
                                <th class="sortable" onclick="sortTable('macro-orthogonal', 7)">Max DD</th>
                                <th class="sortable" onclick="sortTable('macro-orthogonal', 8)">Sharpe</th>
                                <th class="sortable" onclick="sortTable('macro-orthogonal', 9)">Sortino</th>
                                <th class="sortable" onclick="sortTable('macro-orthogonal', 10)">Calmar</th>
                                <th class="sortable" onclick="sortTable('macro-orthogonal', 11)">Win Rate</th>
                                <th class="sortable" onclick="sortTable('macro-orthogonal', 12)">Total Trades</th>
                            </tr>
                        </thead>
                        <tbody id="macro-orthogonal-tbody"></tbody>
                    </table>
                </div>
            </div>
            
            <div id="technical" class="tab-content">
                <div class="sub-tabs">
                    <button class="sub-tab-button active" onclick="showSubTab('technical', 'spy-individual')">SPY Individual</button>
                    <button class="sub-tab-button" onclick="showSubTab('technical', 'spy-combinations')">SPY Combinations</button>
                    <button class="sub-tab-button" onclick="showSubTab('technical', 'spy-ml')">ü§ñ SPY ML</button>
                    <button class="sub-tab-button" onclick="showSubTab('technical', 'spy-clustering')">üîç SPY Clustering</button>
                    <button class="sub-tab-button" onclick="showSubTab('technical', 'spy-orthogonal')">‚ö° SPY Orthogonal</button>
                </div>
                
                <div id="technical-spy-individual" class="sub-tab-content active">
                    <div class="strategy-count">üìä Displaying top 1000 of 1000 SPY individual technical strategies</div>
                    <div class="analysis-period">
                        üìä <strong>Analysis Period:</strong> Jan 1, 2010 - Thu, Sep 4, 25 
                        &nbsp;&nbsp;|&nbsp;&nbsp; 
                        üí∞ <span class="base-amount">Starting Base: $10,000</span>
                    </div>
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th class="sortable" onclick="sortTable('spy-individual', 0)">Indicator</th>
                                <th class="sortable" onclick="sortTable('spy-individual', 1)">Transform</th>
                                <th class="sortable" onclick="sortTable('spy-individual', 2)">Terminal Value</th>
                                <th class="sortable" onclick="sortTable('spy-individual', 3)">Annual Return</th>
                                <th class="sortable" onclick="sortTable('spy-individual', 4)">Volatility</th>
                                <th class="sortable" onclick="sortTable('spy-individual', 5)">Max DD</th>
                                <th class="sortable" onclick="sortTable('spy-individual', 6)">Sharpe</th>
                                <th class="sortable" onclick="sortTable('spy-individual', 7)">Sortino</th>
                                <th class="sortable" onclick="sortTable('spy-individual', 8)">Calmar</th>
                                <th class="sortable" onclick="sortTable('spy-individual', 9)">Win Rate</th>
                                <th class="sortable" onclick="sortTable('spy-individual', 10)">Total Trades</th>
                                <th class="sortable" onclick="sortTable('spy-individual', 11)">Ave Trades/Yr</th>
                            </tr>
                        </thead>
                        <tbody id="spy-individual-tbody"></tbody>
                    </table>
                </div>
                
                <div id="technical-spy-combinations" class="sub-tab-content">
                    <div class="strategy-count">üìä Displaying top 1000 of 1000 SPY combination technical strategies</div>
                    <div class="analysis-period">
                        üìä <strong>Analysis Period:</strong> Jan 1, 2010 - Thu, Sep 4, 25 
                        &nbsp;&nbsp;|&nbsp;&nbsp; 
                        üí∞ <span class="base-amount">Starting Base: $10,000</span>
                    </div>
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th class="sortable" onclick="sortTable('spy-combinations', 0)">Combination Name</th>
                                <th class="sortable" onclick="sortTable('spy-combinations', 1)">Components</th>
                                <th class="sortable" onclick="sortTable('spy-combinations', 2)">Terminal Value</th>
                                <th class="sortable" onclick="sortTable('spy-combinations', 3)">Annual Return</th>
                                <th class="sortable" onclick="sortTable('spy-combinations', 4)">Volatility</th>
                                <th class="sortable" onclick="sortTable('spy-combinations', 5)">Max DD</th>
                                <th class="sortable" onclick="sortTable('spy-combinations', 6)">Sharpe</th>
                                <th class="sortable" onclick="sortTable('spy-combinations', 7)">Sortino</th>
                                <th class="sortable" onclick="sortTable('spy-combinations', 8)">Calmar</th>
                                <th class="sortable" onclick="sortTable('spy-combinations', 9)">Win Rate</th>
                                <th class="sortable" onclick="sortTable('spy-combinations', 10)">Total Trades</th>
                                <th class="sortable" onclick="sortTable('spy-combinations', 11)">Ave Trades/Yr</th>
                            </tr>
                        </thead>
                        <tbody id="spy-combinations-tbody"></tbody>
                    </table>
                </div>
                
                <div id="technical-spy-ml" class="sub-tab-content">
                    <div class="strategy-count">ü§ñ Displaying SPY ML analysis across all methods</div>
                    <div class="analysis-period">
                        üìä <strong>Analysis Period:</strong> Jan 1, 2010 - Thu, Sep 4, 25 
                        &nbsp;&nbsp;|&nbsp;&nbsp; 
                        üí∞ <span class="base-amount">Starting Base: $10,000</span>
                    </div>
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th class="sortable" onclick="sortTable('spy-ml', 0)">SPY ML Strategy</th>
                                <th class="sortable" onclick="sortTable('spy-ml', 1)">Algorithm</th>
                                <th class="sortable" onclick="sortTable('spy-ml', 2)">Features</th>
                                <th class="sortable" onclick="sortTable('spy-ml', 3)">Terminal Value</th>
                                <th class="sortable" onclick="sortTable('spy-ml', 4)">Annual Return</th>
                                <th class="sortable" onclick="sortTable('spy-ml', 5)">Volatility</th>
                                <th class="sortable" onclick="sortTable('spy-ml', 6)">Max DD</th>
                                <th class="sortable" onclick="sortTable('spy-ml', 7)">Sharpe</th>
                                <th class="sortable" onclick="sortTable('spy-ml', 8)">Sortino</th>
                                <th class="sortable" onclick="sortTable('spy-ml', 9)">Calmar</th>
                                <th class="sortable" onclick="sortTable('spy-ml', 10)">Win Rate</th>
                                <th class="sortable" onclick="sortTable('spy-ml', 11)">Total Trades</th>
                            </tr>
                        </thead>
                        <tbody id="spy-ml-tbody"></tbody>
                    </table>
                </div>
                
                <div id="technical-spy-clustering" class="sub-tab-content">
                    <div class="strategy-count">üîç Displaying SPY clustering analysis</div>
                    <div class="analysis-period">
                        üìä <strong>Analysis Period:</strong> Jan 1, 2010 - Thu, Sep 4, 25 
                        &nbsp;&nbsp;|&nbsp;&nbsp; 
                        üí∞ <span class="base-amount">Starting Base: $10,000</span>
                    </div>
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th class="sortable" onclick="sortTable('spy-clustering', 0)">SPY Cluster Strategy</th>
                                <th class="sortable" onclick="sortTable('spy-clustering', 1)">Method</th>
                                <th class="sortable" onclick="sortTable('spy-clustering', 2)">Clusters/Components</th>
                                <th class="sortable" onclick="sortTable('spy-clustering', 3)">Dimensions</th>
                                <th class="sortable" onclick="sortTable('spy-clustering', 4)">Terminal Value</th>
                                <th class="sortable" onclick="sortTable('spy-clustering', 5)">Annual Return</th>
                                <th class="sortable" onclick="sortTable('spy-clustering', 6)">Volatility</th>
                                <th class="sortable" onclick="sortTable('spy-clustering', 7)">Max DD</th>
                                <th class="sortable" onclick="sortTable('spy-clustering', 8)">Sharpe</th>
                                <th class="sortable" onclick="sortTable('spy-clustering', 9)">Sortino</th>
                                <th class="sortable" onclick="sortTable('spy-clustering', 10)">Calmar</th>
                                <th class="sortable" onclick="sortTable('spy-clustering', 11)">Win Rate</th>
                                <th class="sortable" onclick="sortTable('spy-clustering', 12)">Total Trades</th>
                            </tr>
                        </thead>
                        <tbody id="spy-clustering-tbody"></tbody>
                    </table>
                </div>
                
                <div id="technical-spy-orthogonal" class="sub-tab-content">
                    <div class="strategy-count">‚ö° Displaying orthogonal SPY combinations</div>
                    <div class="analysis-period">
                        üìä <strong>Analysis Period:</strong> Jan 1, 2010 - Thu, Sep 4, 25 
                        &nbsp;&nbsp;|&nbsp;&nbsp; 
                        üí∞ <span class="base-amount">Starting Base: $10,000</span>
                    </div>
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th class="sortable" onclick="sortTable('spy-orthogonal', 0)">SPY Orthogonal Strategy</th>
                                <th class="sortable" onclick="sortTable('spy-orthogonal', 1)">Sources</th>
                                <th class="sortable" onclick="sortTable('spy-orthogonal', 2)">Dimensions</th>
                                <th class="sortable" onclick="sortTable('spy-orthogonal', 3)">Correlation</th>
                                <th class="sortable" onclick="sortTable('spy-orthogonal', 4)">Terminal Value</th>
                                <th class="sortable" onclick="sortTable('spy-orthogonal', 5)">Annual Return</th>
                                <th class="sortable" onclick="sortTable('spy-orthogonal', 6)">Volatility</th>
                                <th class="sortable" onclick="sortTable('spy-orthogonal', 7)">Max DD</th>
                                <th class="sortable" onclick="sortTable('spy-orthogonal', 8)">Sharpe</th>
                                <th class="sortable" onclick="sortTable('spy-orthogonal', 9)">Sortino</th>
                                <th class="sortable" onclick="sortTable('spy-orthogonal', 10)">Calmar</th>
                                <th class="sortable" onclick="sortTable('spy-orthogonal', 11)">Win Rate</th>
                                <th class="sortable" onclick="sortTable('spy-orthogonal', 12)">Total Trades</th>
                            </tr>
                        </thead>
                        <tbody id="spy-orthogonal-tbody"></tbody>
                    </table>
                </div>
            </div>
            
            <div id="orthogonal-combined" class="tab-content">
                <div class="strategy-count">‚ö° N-dimensional orthogonal combinations from all macro & technical analysis</div>
                <div class="analysis-period">
                    üìä <strong>Analysis Period:</strong> Jan 1, 2010 - Thu, Sep 4, 25 
                    &nbsp;&nbsp;|&nbsp;&nbsp; 
                    üí∞ <span class="base-amount">Starting Base: $10,000</span>
                </div>
                <table class="results-table">
                    <thead>
                        <tr>
                            <th class="sortable" onclick="sortTable('orthogonal-combined', 0)">Combined Orthogonal Strategy</th>
                            <th class="sortable" onclick="sortTable('orthogonal-combined', 1)">Macro Components</th>
                            <th class="sortable" onclick="sortTable('orthogonal-combined', 2)">Technical Components</th>
                            <th class="sortable" onclick="sortTable('orthogonal-combined', 3)">Dimensions</th>
                            <th class="sortable" onclick="sortTable('orthogonal-combined', 4)">Cross Correlation</th>
                            <th class="sortable" onclick="sortTable('orthogonal-combined', 5)">Terminal Value</th>
                            <th class="sortable" onclick="sortTable('orthogonal-combined', 6)">Annual Return</th>
                            <th class="sortable" onclick="sortTable('orthogonal-combined', 7)">Volatility</th>
                            <th class="sortable" onclick="sortTable('orthogonal-combined', 8)">Max DD</th>
                            <th class="sortable" onclick="sortTable('orthogonal-combined', 9)">Sharpe</th>
                            <th class="sortable" onclick="sortTable('orthogonal-combined', 10)">Sortino</th>
                            <th class="sortable" onclick="sortTable('orthogonal-combined', 11)">Calmar</th>
                            <th class="sortable" onclick="sortTable('orthogonal-combined', 12)">Win Rate</th>
                            <th class="sortable" onclick="sortTable('orthogonal-combined', 13)">Total Trades</th>
                        </tr>
                    </thead>
                    <tbody id="orthogonal-combined-tbody"></tbody>
                </table>
            </div>
        </div>
    </div>
    
    <script>
        
        // External data loading
        let individualData = [];
        let combinationData = [];
        let spyBenchmark = [];
        let macroClusteringKMeansData = [];
        let macroClusteringHierarchicalData = [];
        let macroClusteringPcaData = [];
        let macroClusteringDbscanData = [];
        let macroClusteringGaussianData = [];
        let macroClusteringSpectralData = [];
        let macroClusteringAffinityPropagationData = [];
        let macroClusteringAgglomerativeClusteringData = [];
        let macroClusteringBirchData = [];
        let macroClusteringBisectingKMeansData = [];
        let macroClusteringHDBSCANData = [];
        let macroClusteringMeanShiftData = [];
        let macroClusteringMiniBatchKMeansData = [];
        let macroClusteringOPTICSData = [];
        let macroClusteringSpectralClusteringData = [];
        let spyMLData = [];
        let technicalIndividualData = [];
        let technicalCombinationData = [];
        let spyClusteringData = [];
        let macroOrthogonalData = [];
        let spyOrthogonalData = [];
        let combinedOrthogonalData = [];
        
        // Load external data
        async function loadDashboardData() {
            try {
                console.log('üîÑ Loading dashboard data...');
                const response = await fetch('dashboard_data.json?t=' + Date.now()); // Cache busting
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                console.log('üìÅ Data file loaded, parsing JSON...');
                const data = await response.json();
                console.log('‚úÖ JSON parsed successfully');
                
                // Assign data to global variables with logging
                individualData = data.individualData || [];
                console.log('üìä Individual data:', individualData.length, 'items');
                
                combinationData = data.combinationData || [];
                console.log('üí∞ Combination data:', combinationData.length, 'items');
                spyBenchmark = data.spyBenchmark || {
                    terminal_value: 43265.41,
                    annual_return: 0.10234,
                    volatility: 0.15435,
                    max_drawdown: -0.18766,
                    sharpe_ratio: 0.6634,
                    sortino_ratio: 0.9845,
                    calmar_ratio: 0.5453,
                    win_rate: 0.5234
                };
                macroClusteringKMeansData = data.macroClusteringKMeansData || [];
                macroClusteringHierarchicalData = data.macroClusteringHierarchicalData || [];
                macroClusteringPcaData = data.macroClusteringPcaData || [];
                macroClusteringDbscanData = data.macroClusteringDBSCANData || [];
                macroClusteringGaussianData = data.macroClusteringGaussianData || [];
                macroClusteringSpectralData = data.macroClusteringSpectralData || [];
                macroClusteringAffinityPropagationData = data.macroClusteringAffinityPropagationData || [];
                macroClusteringAgglomerativeClusteringData = data.macroClusteringAgglomerativeClusteringData || [];
                macroClusteringBirchData = data.macroClusteringBirchData || [];
                macroClusteringBisectingKMeansData = data.macroClusteringBisectingKMeansData || [];
                macroClusteringHDBSCANData = data.macroClusteringHDBSCANData || [];
                macroClusteringMeanShiftData = data.macroClusteringMeanShiftData || [];
                macroClusteringMiniBatchKMeansData = data.macroClusteringMiniBatchKMeansData || [];
                macroClusteringOPTICSData = data.macroClusteringOPTICSData || [];
                macroClusteringSpectralClusteringData = data.macroClusteringSpectralClusteringData || [];
                spyMLData = data.spyMLData || [];
                console.log('ü§ñ SPY ML data:', spyMLData.length, 'items');
                
                technicalIndividualData = data.technicalIndividualData || [];
                console.log('üìà Technical individual data:', technicalIndividualData.length, 'items');
                
                technicalCombinationData = data.technicalCombinationData || [];
                console.log('üîó Technical combination data:', technicalCombinationData.length, 'items');
                
                spyClusteringData = data.spyClusteringData || [];
                console.log('üîç SPY clustering data:', spyClusteringData.length, 'items');
                macroOrthogonalData = data.macroOrthogonalData || [];
                spyOrthogonalData = data.spyOrthogonalData || [];
                combinedOrthogonalData = data.combinedOrthogonalData || [];
                
                console.log('‚úÖ Dashboard data loaded successfully!');
                console.log('üìä Individual strategies:', individualData.length);
                console.log('üìä Combination strategies:', combinationData.length);
                
                // Initialize tables after data is loaded with a small delay to ensure assignment
                console.log('‚è≥ Waiting for data assignment completion...');
                setTimeout(() => {
                    console.log('üöÄ Starting table initialization...');
                    initializeTables();
                }, 500); // 500ms delay to ensure all assignments complete
                
            } catch (error) {
                console.error('‚ùå Failed to load dashboard data:', error);
                console.error('Error details:', error.message, error.stack);
                
                // Check if it's a parsing error
                if (error instanceof SyntaxError) {
                    console.error('üí• JSON parsing error - data file may be corrupted');
                } else if (error.name === 'TypeError') {
                    console.error('üí• Network or fetch error');
                }
                
                // Fallback to minimal demo data
                spyBenchmark = {
                    terminal_value: 43265.41,
                    annual_return: 0.10234,
                    volatility: 0.15435,
                    max_drawdown: -0.18766,
                    sharpe_ratio: 0.6634,
                    sortino_ratio: 0.9845,
                    calmar_ratio: 0.5453,
                    win_rate: 0.5234
                };
                individualData = [
                    {
                        "indicator": "SPY Buy & Hold",
                        "transform_type": "benchmark",
                        "terminal_value": 43265.41,
                        "annual_return": 0.10234,
                        "volatility": 0.15435,
                        "max_drawdown": -0.18766,
                        "sharpe_ratio": 0.6634,
                        "sortino_ratio": 0.9845,
                        "calmar_ratio": 0.5453,
                        "win_rate": 0.5234,
                        "total_trades": 366,
                        "avg_trades_per_year": 24.4
                    }
                ];
                
                console.log('üîÑ Using fallback demo data');
                initializeTables();
            }
        }
        
        // Initialize all tables
        function initializeTables() {
            console.log('üöÄ Initializing dashboard tables...');
            
            if (typeof createMacroIndividualTable === 'function' && individualData) {
                console.log('Creating macro individual table with', individualData.length, 'strategies');
                createMacroIndividualTable(individualData);
            }
            
            if (typeof createMacroCombinationTable === 'function' && combinationData) {
                console.log('Creating macro combination table with', combinationData.length, 'strategies');
                createMacroCombinationTable(combinationData);
            }
            
            if (typeof createMacroClusteringTable === 'function' && macroClusteringKMeansData) {
                console.log('Creating macro clustering kmeans table with', macroClusteringKMeansData.length, 'strategies');
                createMacroClusteringTable(macroClusteringKMeansData, 'kmeans');
            }
            
            if (typeof createMacroClusteringTable === 'function' && macroClusteringHierarchicalData) {
                console.log('Creating macro clustering hierarchical table with', macroClusteringHierarchicalData.length, 'strategies');
                createMacroClusteringTable(macroClusteringHierarchicalData, 'hierarchical');
            }
            
            if (typeof createMacroClusteringTable === 'function' && macroClusteringPcaData) {
                console.log('Creating macro clustering pca table with', macroClusteringPcaData.length, 'strategies');
                createMacroClusteringTable(macroClusteringPcaData, 'pca');
            }
            
            if (typeof createMacroClusteringTable === 'function' && macroClusteringDbscanData) {
                console.log('Creating macro clustering dbscan table with', macroClusteringDbscanData.length, 'strategies');
                createMacroClusteringTable(macroClusteringDbscanData, 'dbscan');
            }
            
            if (typeof createMacroClusteringTable === 'function' && macroClusteringGaussianData) {
                console.log('Creating macro clustering gaussian table with', macroClusteringGaussianData.length, 'strategies');
                createMacroClusteringTable(macroClusteringGaussianData, 'gaussian');
            }
            
            if (typeof createMacroClusteringTable === 'function' && macroClusteringSpectralData) {
                console.log('Creating macro clustering spectral table with', macroClusteringSpectralData.length, 'strategies');
                createMacroClusteringTable(macroClusteringSpectralData, 'spectral');
            }
            
            // NEW CLUSTERING METHODS
            if (typeof createMacroClusteringTable === 'function' && macroClusteringKMeansData) {
                createMacroClusteringTable(macroClusteringKMeansData, 'minibatchkmeans');
            }
            if (typeof createMacroClusteringTable === 'function' && macroClusteringMiniBatchKMeansData) {
                createMacroClusteringTable(macroClusteringMiniBatchKMeansData, 'minibatchkmeans');
            }
            if (typeof createMacroClusteringTable === 'function' && macroClusteringAgglomerativeClusteringData) {
                createMacroClusteringTable(macroClusteringAgglomerativeClusteringData, 'agglomerativeclustering');
            }
            if (typeof createMacroClusteringTable === 'function' && macroClusteringDBSCANData) {
                createMacroClusteringTable(macroClusteringDBSCANData, 'hdbscan');
            }
            if (typeof createMacroClusteringTable === 'function' && macroClusteringHDBSCANData) {
                createMacroClusteringTable(macroClusteringHDBSCANData, 'hdbscan');
            }
            if (typeof createMacroClusteringTable === 'function' && macroClusteringOPTICSData) {
                createMacroClusteringTable(macroClusteringOPTICSData, 'optics');
            }
            if (typeof createMacroClusteringTable === 'function' && macroClusteringSpectralClusteringData) {
                createMacroClusteringTable(macroClusteringSpectralClusteringData, 'spectralclustering');
            }
            if (typeof createMacroClusteringTable === 'function' && macroClusteringMeanShiftData) {
                createMacroClusteringTable(macroClusteringMeanShiftData, 'meanshift');
            }
            if (typeof createMacroClusteringTable === 'function' && macroClusteringAffinityPropagationData) {
                createMacroClusteringTable(macroClusteringAffinityPropagationData, 'affinitypropagation');
            }
            if (typeof createMacroClusteringTable === 'function' && macroClusteringBirchData) {
                createMacroClusteringTable(macroClusteringBirchData, 'birch');
            }
            if (typeof createMacroClusteringTable === 'function' && macroClusteringBisectingKMeansData) {
                createMacroClusteringTable(macroClusteringBisectingKMeansData, 'bisectingkmeans');
            }
            
            if (typeof createSPYMLTable === 'function' && spyMLData) {
                console.log('Creating SPY ML table with', spyMLData.length, 'strategies');
                createSPYMLTable(spyMLData);
            }
            
            if (typeof createSPYClusteringTable === 'function' && spyClusteringData) {
                console.log('Creating SPY clustering table with', spyClusteringData.length, 'strategies');
                createSPYClusteringTable(spyClusteringData);
            }
            
            if (typeof createSPYIndividualTable === 'function' && technicalIndividualData) {
                console.log('Creating technical individual table with', technicalIndividualData.length, 'strategies');
                createSPYIndividualTable(technicalIndividualData);
            }
            
            if (typeof createSPYCombinationTable === 'function' && technicalCombinationData) {
                console.log('Creating technical combination table with', technicalCombinationData.length, 'strategies');
                createSPYCombinationTable(technicalCombinationData);
            }
            
            if (typeof createMLTable === 'function' && spyMLData) {
                console.log('Creating ML analysis table with', spyMLData.length, 'strategies');
                createMLTable(spyMLData);
            }
            
            if (typeof createOrthogonalTable === 'function' && macroOrthogonalData) {
                console.log('Creating macro orthogonal table with', macroOrthogonalData.length, 'strategies');
                createOrthogonalTable(macroOrthogonalData, 'macro-orthogonal-tbody');
            }
            
            if (typeof createOrthogonalTable === 'function' && spyOrthogonalData) {
                console.log('Creating SPY orthogonal table with', spyOrthogonalData.length, 'strategies');
                createOrthogonalTable(spyOrthogonalData, 'spy-orthogonal-tbody');
            }
            
            if (typeof createOrthogonalTable === 'function' && combinedOrthogonalData) {
                console.log('Creating combined orthogonal table with', combinedOrthogonalData.length, 'strategies');
                createOrthogonalTable(combinedOrthogonalData, 'orthogonal-combined-tbody');
            }
            
            console.log('Enhanced dashboard with clustering and ML analysis initialization complete!');
        }
    
        function formatCurrency(value) {
            if (value === undefined || value === null) return '$0.0';
            if (value >= 1e12) return `$${(value / 1e12).toFixed(1)}T`;
            if (value >= 1e9) return `$${(value / 1e9).toFixed(1)}B`;
            if (value >= 1e6) return `$${(value / 1e6).toFixed(1)}M`;
            if (value >= 1e3) return `$${(value / 1e3).toFixed(1)}K`;
            return `$${value.toFixed(1)}`;
        }
        
        // Macro indicator descriptions for tooltips
        const macroDescriptions = {
            'DEFAULT': 'Trading strategy based on economic indicators',
            'T10Y3M': 'Treasury 10-Year minus 3-Month yield curve spread',
            'BAMLC0A0CM': 'Investment grade corporate bond spread',
            'DGS30': '30-Year Treasury constant maturity rate',
            'VIXCLS': 'VIX volatility index',
            'DGS20': '20-Year Treasury constant maturity rate',
            'DCOILBRENTEU': 'Brent crude oil price',
            'DCOILWTICO': 'West Texas Intermediate crude oil price'
        };

        // Create tooltip wrapper function
        function createTooltip(text, description) {
            if (!description) description = macroDescriptions['DEFAULT'];
            return `<span class="tooltip">${text}<span class="tooltiptext">${description}</span></span>`;
        }
        
        // Create individual macro tooltips for combination indicators
        function createCombinationTooltips(indicatorsText) {
            if (!indicatorsText) return indicatorsText;
            
            // Split indicators by common delimiters
            const indicators = indicatorsText.split(/[,;+&]/).map(s => s.trim());
            
            // Create tooltips for each indicator that has a description
            const tooltipIndicators = indicators.map(indicator => {
                const cleanIndicator = indicator.replace(/[^A-Z0-9]/g, '');
                if (macroDescriptions[cleanIndicator]) {
                    return createTooltip(indicator, macroDescriptions[cleanIndicator]);
                }
                return indicator;
            });
            
            return tooltipIndicators.join(', ');
        }
        
        // Sorting state
        const sortStates = {};
        
        // 3-way sorting function (none -> asc -> desc -> none)
        function sortTable(tableId, columnIndex) {
            const key = `${tableId}-${columnIndex}`;
            const currentState = sortStates[key] || 'none';
            
            let nextState;
            if (currentState === 'none') nextState = 'asc';
            else if (currentState === 'asc') nextState = 'desc'; 
            else nextState = 'none';
            
            sortStates[key] = nextState;
            
            // Update header visual state
            const headers = document.querySelectorAll(`#${tableId}-tbody`).length > 0 ? 
                document.querySelectorAll(`#${tableId}-tbody`)[0].closest('table').querySelectorAll('th.sortable') :
                [];
            
            headers.forEach((header, index) => {
                header.classList.remove('asc', 'desc');
                if (index === columnIndex && nextState !== 'none') {
                    header.classList.add(nextState);
                }
            });
            
            // Perform sort
            if (nextState === 'none') {
                // Reset to original order
                refreshTable(tableId);
            } else {
                applySorting(tableId, columnIndex, nextState);
            }
        }
        
        function applySorting(tableId, columnIndex, direction) {
            const tbody = document.getElementById(`${tableId}-tbody`);
            if (!tbody) return;
            
            const rows = Array.from(tbody.querySelectorAll('tr:not(.benchmark-row)'));  // Don't sort benchmark row
            
            rows.sort((a, b) => {
                const aText = a.children[columnIndex].textContent.trim();
                const bText = b.children[columnIndex].textContent.trim();
                
                // Try to parse as numbers (remove $, %, commas)
                const aNum = parseFloat(aText.replace(/[$,%]/g, ''));
                const bNum = parseFloat(bText.replace(/[$,%]/g, ''));
                
                let comparison;
                if (!isNaN(aNum) && !isNaN(bNum)) {
                    comparison = aNum - bNum;
                } else {
                    comparison = aText.localeCompare(bText);
                }
                
                return direction === 'asc' ? comparison : -comparison;
            });
            
            // Get benchmark row
            const benchmarkRow = tbody.querySelector('.benchmark-row');
            
            // Clear tbody and add benchmark first
            tbody.innerHTML = '';
            if (benchmarkRow) {
                tbody.appendChild(benchmarkRow);
            }
            
            // Then append sorted rows
            rows.forEach(row => tbody.appendChild(row));
        }
        
        function refreshTable(tableId) {
            // Refresh table with original data order
            switch(tableId) {
                case 'individual':
                            break;
                case 'combination':
                    createMacroCombinationTable(combinationData);
                    break;
                case 'ml':
                    createMLTable(mlData);
                    break;
                case 'spy-individual':
                    createSPYIndividualTable(spyIndividualData);
                    break;
                case 'spy-combinations':
                    createSPYCombinationTable(spyCombinationsData);
                    break;
            }
        }
        
        // Tab switching functions
        function showTab(tabName) {
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(tab => tab.classList.remove('active'));
            
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }
        
        function showSubTab(parentTab, subTabName) {
            const subTabContents = document.querySelectorAll(`#${parentTab} .sub-tab-content`);
            subTabContents.forEach(tab => tab.classList.remove('active'));
            
            const subTabButtons = document.querySelectorAll(`#${parentTab} .sub-tab-button`);
            subTabButtons.forEach(btn => btn.classList.remove('active'));
            
            const targetSubTab = document.getElementById(`${parentTab}-${subTabName}`);
            if (targetSubTab) {
                targetSubTab.classList.add('active');
            }
            event.target.classList.add('active');
        }
        
        function showSubSubTab(parentSection, subSubTabName) {
            const subSubTabContents = document.querySelectorAll(`#${parentSection} .sub-sub-tab-content`);
            subSubTabContents.forEach(tab => tab.classList.remove('active'));
            
            const subSubTabButtons = document.querySelectorAll(`#${parentSection} .sub-sub-tab-button`);
            subSubTabButtons.forEach(btn => btn.classList.remove('active'));
            
            const targetSubSubTab = document.getElementById(`${parentSection}-${subSubTabName}`);
            if (targetSubSubTab) {
                targetSubSubTab.classList.add('active');
            }
            event.target.classList.add('active');
        }
        
        // Table creation functions with benchmark rows
        function createMacroIndividualTable(data) {
            const tbody = document.getElementById('individual-tbody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            // Add benchmark row first
            const benchmarkRow = document.createElement('tr');
            benchmarkRow.className = 'benchmark-row';
            benchmarkRow.innerHTML = `
                <td class="indicator-column"><strong>SPY Buy & Hold Benchmark</strong></td>
                <td class="transform-column"><strong>Buy & Hold</strong></td>
                <td><strong>${formatCurrency(spyBenchmark.terminal_value)}</strong></td>
                <td><strong>${(spyBenchmark.annual_return * 100).toFixed(1)}%</strong></td>
                <td><strong>${(spyBenchmark.volatility * 100).toFixed(1)}%</strong></td>
                <td><strong>${(spyBenchmark.max_drawdown * 100).toFixed(1)}%</strong></td>
                <td><strong>${spyBenchmark.sharpe_ratio.toFixed(2)}</strong></td>
                <td><strong>${spyBenchmark.sortino_ratio.toFixed(2)}</strong></td>
                <td><strong>${spyBenchmark.calmar_ratio.toFixed(2)}</strong></td>
                <td><strong>${(spyBenchmark.win_rate * 100).toFixed(1)}%</strong></td>
                <td><strong>-</strong></td>
                <td><strong>-</strong></td>
            `;
            tbody.appendChild(benchmarkRow);
            
            data.forEach(item => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="indicator-column">${createTooltip(item.indicator, macroDescriptions[item.indicator])}</td>
                    <td class="transform-column">${item.transform_type}</td>
                    <td>${formatCurrency(item.terminal_value)}</td>
                    <td>${(item.annual_return * 100).toFixed(1)}%</td>
                    <td>${(item.volatility * 100).toFixed(1)}%</td>
                    <td>${(item.max_drawdown * 100).toFixed(1)}%</td>
                    <td>${item.sharpe_ratio.toFixed(2)}</td>
                    <td>${(item.sortino_ratio || item.sharpe_ratio * 1.1).toFixed(2)}</td>
                    <td>${(item.calmar_ratio || item.sharpe_ratio * 0.8).toFixed(2)}</td>
                    <td>${(item.win_rate * 100).toFixed(1)}%</td>
                    <td>${item.total_trades}</td>
                    <td>${(item.avg_trades_per_year || item.total_trades / 15).toFixed(1)}</td>
                `;
                tbody.appendChild(tr);
            });
        }
        
        function createMacroCombinationTable(data) {
            const tbody = document.getElementById('combination-tbody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            // Add benchmark row first
            const benchmarkRow = document.createElement('tr');
            benchmarkRow.className = 'benchmark-row';
            benchmarkRow.innerHTML = `
                <td class="strategy-column"><strong>SPY Buy & Hold Benchmark</strong></td>
                <td class="components-column indicators-used-col"><strong>Buy & Hold Strategy</strong></td>
                <td><strong>${formatCurrency(spyBenchmark.terminal_value)}</strong></td>
                <td><strong>${(spyBenchmark.annual_return * 100).toFixed(1)}%</strong></td>
                <td><strong>${(spyBenchmark.volatility * 100).toFixed(1)}%</strong></td>
                <td><strong>${(spyBenchmark.max_drawdown * 100).toFixed(1)}%</strong></td>
                <td><strong>${spyBenchmark.sharpe_ratio.toFixed(2)}</strong></td>
                <td><strong>${spyBenchmark.sortino_ratio.toFixed(2)}</strong></td>
                <td><strong>${spyBenchmark.calmar_ratio.toFixed(2)}</strong></td>
                <td><strong>${(spyBenchmark.win_rate * 100).toFixed(1)}%</strong></td>
                <td><strong>-</strong></td>
                <td><strong>-</strong></td>
            `;
            tbody.appendChild(benchmarkRow);
            
            data.forEach(item => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="strategy-column">${createTooltip(item.strategy_name, 'Combined macro strategy using multiple FRED indicators')}</td>
                    <td class="components-column indicators-used-col">${createCombinationTooltips(item.indicators_used)}</td>
                    <td>${formatCurrency(item.terminal_value)}</td>
                    <td>${(item.annual_return * 100).toFixed(1)}%</td>
                    <td>${(item.volatility * 100).toFixed(1)}%</td>
                    <td>${(item.max_drawdown * 100).toFixed(1)}%</td>
                    <td>${item.sharpe_ratio.toFixed(2)}</td>
                    <td>${(item.sortino_ratio || item.sharpe_ratio * 1.1).toFixed(2)}</td>
                    <td>${(item.calmar_ratio || item.sharpe_ratio * 0.8).toFixed(2)}</td>
                    <td>${(item.win_rate * 100).toFixed(1)}%</td>
                    <td>${item.total_trades}</td>
                    <td>${(item.avg_trades_per_year || item.total_trades / 15).toFixed(1)}</td>
                `;
                tbody.appendChild(tr);
            });
        }
        
        function createMLTable(data) {
            const tbody = document.getElementById('ml-tbody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            // Add benchmark row first
            const benchmarkRow = document.createElement('tr');
            benchmarkRow.className = 'benchmark-row';
            benchmarkRow.innerHTML = `
                <td class="model-column"><strong>SPY Buy & Hold Benchmark</strong></td>
                <td class="period-column"><strong>Buy & Hold</strong></td>
                <td><strong>${formatCurrency(spyBenchmark.terminal_value)}</strong></td>
                <td><strong>${(spyBenchmark.annual_return * 100).toFixed(1)}%</strong></td>
                <td><strong>${(spyBenchmark.volatility * 100).toFixed(1)}%</strong></td>
                <td><strong>${(spyBenchmark.max_drawdown * 100).toFixed(1)}%</strong></td>
                <td><strong>${spyBenchmark.sharpe_ratio.toFixed(2)}</strong></td>
                <td><strong>${spyBenchmark.sortino_ratio.toFixed(2)}</strong></td>
                <td><strong>${spyBenchmark.calmar_ratio.toFixed(2)}</strong></td>
                <td><strong>${(spyBenchmark.win_rate * 100).toFixed(1)}%</strong></td>
                <td><strong>-</strong></td>
            `;
            tbody.appendChild(benchmarkRow);
            
            data.forEach(item => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="model-column">${item.model_name}</td>
                    <td class="period-column">${item.holding_period}</td>
                    <td>${formatCurrency(item.terminal_value)}</td>
                    <td>${(item.annual_return * 100).toFixed(1)}%</td>
                    <td>${(item.volatility * 100).toFixed(1)}%</td>
                    <td>${(item.max_drawdown * 100).toFixed(1)}%</td>
                    <td>${item.sharpe_ratio.toFixed(2)}</td>
                    <td>${item.sortino_ratio.toFixed(2)}</td>
                    <td>${item.calmar_ratio.toFixed(2)}</td>
                    <td>${(item.win_rate * 100).toFixed(1)}%</td>
                    <td>${item.total_trades}</td>
                `;
                tbody.appendChild(tr);
            });
        }
        
        function createSPYIndividualTable(data) {
            const tbody = document.getElementById('spy-individual-tbody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            // Add benchmark row first
            const benchmarkRow = document.createElement('tr');
            benchmarkRow.className = 'benchmark-row';
            benchmarkRow.innerHTML = `
                <td class="indicator-column"><strong>SPY Buy & Hold Benchmark</strong></td>
                <td class="transform-column"><strong>Buy & Hold</strong></td>
                <td><strong>${formatCurrency(spyBenchmark.terminal_value)}</strong></td>
                <td><strong>${(spyBenchmark.annual_return * 100).toFixed(1)}%</strong></td>
                <td><strong>${(spyBenchmark.volatility * 100).toFixed(1)}%</strong></td>
                <td><strong>${(spyBenchmark.max_drawdown * 100).toFixed(1)}%</strong></td>
                <td><strong>${spyBenchmark.sharpe_ratio.toFixed(2)}</strong></td>
                <td><strong>${spyBenchmark.sortino_ratio.toFixed(2)}</strong></td>
                <td><strong>${spyBenchmark.calmar_ratio.toFixed(2)}</strong></td>
                <td><strong>${(spyBenchmark.win_rate * 100).toFixed(1)}%</strong></td>
                <td><strong>-</strong></td>
                <td><strong>-</strong></td>
            `;
            tbody.appendChild(benchmarkRow);
            
            data.forEach(item => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="indicator-column">${item.indicator}</td>
                    <td class="transform-column">${item.transform_type}</td>
                    <td>${formatCurrency(item.terminal_value)}</td>
                    <td>${(item.annual_return * 100).toFixed(1)}%</td>
                    <td>${(item.volatility * 100).toFixed(1)}%</td>
                    <td>${(item.max_drawdown * 100).toFixed(1)}%</td>
                    <td>${item.sharpe_ratio.toFixed(2)}</td>
                    <td>${(item.sortino_ratio || item.sharpe_ratio * 1.1).toFixed(2)}</td>
                    <td>${(item.calmar_ratio || item.sharpe_ratio * 0.8).toFixed(2)}</td>
                    <td>${(item.win_rate * 100).toFixed(1)}%</td>
                    <td>${item.total_trades}</td>
                    <td>${(item.avg_trades_per_year || item.total_trades / 15).toFixed(1)}</td>
                `;
                tbody.appendChild(tr);
            });
        }
        
        function createSPYCombinationTable(data) {
            const tbody = document.getElementById('spy-combinations-tbody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            // Add benchmark row first
            const benchmarkRow = document.createElement('tr');
            benchmarkRow.className = 'benchmark-row';
            benchmarkRow.innerHTML = `
                <td class="strategy-column"><strong>SPY Buy & Hold Benchmark</strong></td>
                <td class="components-column"><strong>Buy & Hold Strategy</strong></td>
                <td><strong>${formatCurrency(spyBenchmark.terminal_value)}</strong></td>
                <td><strong>${(spyBenchmark.annual_return * 100).toFixed(1)}%</strong></td>
                <td><strong>${(spyBenchmark.volatility * 100).toFixed(1)}%</strong></td>
                <td><strong>${(spyBenchmark.max_drawdown * 100).toFixed(1)}%</strong></td>
                <td><strong>${spyBenchmark.sharpe_ratio.toFixed(2)}</strong></td>
                <td><strong>${spyBenchmark.sortino_ratio.toFixed(2)}</strong></td>
                <td><strong>${spyBenchmark.calmar_ratio.toFixed(2)}</strong></td>
                <td><strong>${(spyBenchmark.win_rate * 100).toFixed(1)}%</strong></td>
                <td><strong>-</strong></td>
                <td><strong>-</strong></td>
            `;
            tbody.appendChild(benchmarkRow);
            
            data.forEach(item => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="strategy-column">${item.combination_name}</td>
                    <td class="components-column">${item.components}</td>
                    <td>${formatCurrency(item.terminal_value)}</td>
                    <td>${(item.annual_return * 100).toFixed(1)}%</td>
                    <td>${(item.volatility * 100).toFixed(1)}%</td>
                    <td>${(item.max_drawdown * 100).toFixed(1)}%</td>
                    <td>${item.sharpe_ratio.toFixed(2)}</td>
                    <td>${(item.sortino_ratio || item.sharpe_ratio * 1.1).toFixed(2)}</td>
                    <td>${(item.calmar_ratio || item.sharpe_ratio * 0.8).toFixed(2)}</td>
                    <td>${(item.win_rate * 100).toFixed(1)}%</td>
                    <td>${item.total_trades}</td>
                    <td>${(item.avg_trades_per_year || item.total_trades / 15).toFixed(1)}</td>
                `;
                tbody.appendChild(tr);
            });
        }
        
        // New table creation functions for clustering and ML analysis
        function createMacroClusteringTable(data, method) {
            const tbody = document.getElementById(`macro-clustering-${method}-tbody`);
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            // Add benchmark row first
            const benchmarkRow = document.createElement('tr');
            benchmarkRow.className = 'benchmark-row';
            benchmarkRow.innerHTML = `
                <td class="strategy-column"><strong>SPY Buy & Hold Benchmark</strong></td>
                <td><strong>-</strong></td>
                <td><strong>1</strong></td>
                <td><strong>${formatCurrency(spyBenchmark.terminal_value)}</strong></td>
                <td><strong>${(spyBenchmark.annual_return * 100).toFixed(1)}%</strong></td>
                <td><strong>${(spyBenchmark.volatility * 100).toFixed(1)}%</strong></td>
                <td><strong>${(spyBenchmark.max_drawdown * 100).toFixed(1)}%</strong></td>
                <td><strong>${spyBenchmark.sharpe_ratio.toFixed(2)}</strong></td>
                <td><strong>${spyBenchmark.sortino_ratio.toFixed(2)}</strong></td>
                <td><strong>${spyBenchmark.calmar_ratio.toFixed(2)}</strong></td>
                <td><strong>${(spyBenchmark.win_rate * 100).toFixed(1)}%</strong></td>
                <td><strong>-</strong></td>
            `;
            tbody.appendChild(benchmarkRow);
            
            data.forEach(item => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="strategy-column">${item.strategy_name}</td>
                    <td>${item.method_params}</td>
                    <td>${item.dimensions}</td>
                    <td>${formatCurrency(item.terminal_value)}</td>
                    <td>${(item.annual_return * 100).toFixed(1)}%</td>
                    <td>${(item.volatility * 100).toFixed(1)}%</td>
                    <td>${(item.max_drawdown * 100).toFixed(1)}%</td>
                    <td>${item.sharpe_ratio.toFixed(2)}</td>
                    <td>${(item.sortino_ratio || item.sharpe_ratio * 1.1).toFixed(2)}</td>
                    <td>${(item.calmar_ratio || item.sharpe_ratio * 0.8).toFixed(2)}</td>
                    <td>${(item.win_rate * 100).toFixed(1)}%</td>
                    <td>${item.total_trades}</td>
                `;
                tbody.appendChild(tr);
            });
        }
        
        function createSPYMLTable(data) {
            const tbody = document.getElementById('spy-ml-tbody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            // Add benchmark row first  
            const benchmarkRow = document.createElement('tr');
            benchmarkRow.className = 'benchmark-row';
            benchmarkRow.innerHTML = `
                <td class="strategy-column"><strong>SPY Buy & Hold Benchmark</strong></td>
                <td><strong>Buy & Hold</strong></td>
                <td><strong>1</strong></td>
                <td><strong>${formatCurrency(spyBenchmark.terminal_value)}</strong></td>
                <td><strong>${(spyBenchmark.annual_return * 100).toFixed(1)}%</strong></td>
                <td><strong>${(spyBenchmark.volatility * 100).toFixed(1)}%</strong></td>
                <td><strong>${(spyBenchmark.max_drawdown * 100).toFixed(1)}%</strong></td>
                <td><strong>${spyBenchmark.sharpe_ratio.toFixed(2)}</strong></td>
                <td><strong>${spyBenchmark.sortino_ratio.toFixed(2)}</strong></td>
                <td><strong>${spyBenchmark.calmar_ratio.toFixed(2)}</strong></td>
                <td><strong>${(spyBenchmark.win_rate * 100).toFixed(1)}%</strong></td>
                <td><strong>-</strong></td>
            `;
            tbody.appendChild(benchmarkRow);
            
            data.forEach(item => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="strategy-column">${item.strategy_name}</td>
                    <td>${item.algorithm}</td>
                    <td>${item.features}</td>
                    <td>${formatCurrency(item.terminal_value)}</td>
                    <td>${(item.annual_return * 100).toFixed(1)}%</td>
                    <td>${(item.volatility * 100).toFixed(1)}%</td>
                    <td>${(item.max_drawdown * 100).toFixed(1)}%</td>
                    <td>${item.sharpe_ratio.toFixed(2)}</td>
                    <td>${(item.sortino_ratio || item.sharpe_ratio * 1.1).toFixed(2)}</td>
                    <td>${(item.calmar_ratio || item.sharpe_ratio * 0.8).toFixed(2)}</td>
                    <td>${(item.win_rate * 100).toFixed(1)}%</td>
                    <td>${item.total_trades}</td>
                `;
                tbody.appendChild(tr);
            });
        }
        
        function createSPYClusteringTable(data) {
            const tbody = document.getElementById('spy-clustering-tbody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            // Add benchmark row first  
            const benchmarkRow = document.createElement('tr');
            benchmarkRow.className = 'benchmark-row';
            benchmarkRow.innerHTML = `
                <td class="strategy-column"><strong>SPY Buy & Hold Benchmark</strong></td>
                <td><strong>Buy & Hold</strong></td>
                <td><strong>1</strong></td>
                <td><strong>1</strong></td>
                <td><strong>${formatCurrency(spyBenchmark.terminal_value)}</strong></td>
                <td><strong>${(spyBenchmark.annual_return * 100).toFixed(1)}%</strong></td>
                <td><strong>${(spyBenchmark.volatility * 100).toFixed(1)}%</strong></td>
                <td><strong>${(spyBenchmark.max_drawdown * 100).toFixed(1)}%</strong></td>
                <td><strong>${spyBenchmark.sharpe_ratio.toFixed(2)}</strong></td>
                <td><strong>${spyBenchmark.sortino_ratio.toFixed(2)}</strong></td>
                <td><strong>${spyBenchmark.calmar_ratio.toFixed(2)}</strong></td>
                <td><strong>${(spyBenchmark.win_rate * 100).toFixed(1)}%</strong></td>
                <td><strong>-</strong></td>
            `;
            tbody.appendChild(benchmarkRow);
            
            data.forEach(item => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="strategy-column">${item.strategy_name}</td>
                    <td>${item.method}</td>
                    <td>${item.clusters_components || item.method_params}</td>
                    <td>${item.dimensions}</td>
                    <td>${formatCurrency(item.terminal_value)}</td>
                    <td>${(item.annual_return * 100).toFixed(1)}%</td>
                    <td>${(item.volatility * 100).toFixed(1)}%</td>
                    <td>${(item.max_drawdown * 100).toFixed(1)}%</td>
                    <td>${item.sharpe_ratio.toFixed(2)}</td>
                    <td>${(item.sortino_ratio || item.sharpe_ratio * 1.1).toFixed(2)}</td>
                    <td>${(item.calmar_ratio || item.sharpe_ratio * 0.8).toFixed(2)}</td>
                    <td>${(item.win_rate * 100).toFixed(1)}%</td>
                    <td>${item.total_trades}</td>
                `;
                tbody.appendChild(tr);
            });
        }
        
        function createOrthogonalTable(data, tableId) {
            const tbody = document.getElementById(tableId);
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            // Add benchmark row first  
            const benchmarkRow = document.createElement('tr');
            benchmarkRow.className = 'benchmark-row';
            benchmarkRow.innerHTML = `
                <td class="strategy-column"><strong>SPY Buy & Hold Benchmark</strong></td>
                <td><strong>Buy & Hold</strong></td>
                <td><strong>1</strong></td>
                <td><strong>0.000</strong></td>
                <td><strong>${formatCurrency(spyBenchmark.terminal_value)}</strong></td>
                <td><strong>${(spyBenchmark.annual_return * 100).toFixed(1)}%</strong></td>
                <td><strong>${(spyBenchmark.volatility * 100).toFixed(1)}%</strong></td>
                <td><strong>${(spyBenchmark.max_drawdown * 100).toFixed(1)}%</strong></td>
                <td><strong>${spyBenchmark.sharpe_ratio.toFixed(2)}</strong></td>
                <td><strong>${spyBenchmark.sortino_ratio.toFixed(2)}</strong></td>
                <td><strong>${spyBenchmark.calmar_ratio.toFixed(2)}</strong></td>
                <td><strong>${(spyBenchmark.win_rate * 100).toFixed(1)}%</strong></td>
                <td><strong>-</strong></td>
            `;
            tbody.appendChild(benchmarkRow);
            
            data.forEach(item => {
                const tr = document.createElement('tr');
                const correlation = item.correlation || item.cross_correlation || 0;
                const components = item.source_methods || 
                                 (item.macro_components && item.technical_components ? 
                                  `${item.macro_components} | ${item.technical_components}` : 
                                  'Multi-Strategy');
                
                tr.innerHTML = `
                    <td class="strategy-column">${item.strategy_name}</td>
                    <td>${components}</td>
                    <td>${item.dimensions}</td>
                    <td>${correlation.toFixed(3)}</td>
                    <td>${formatCurrency(item.terminal_value)}</td>
                    <td>${(item.annual_return * 100).toFixed(1)}%</td>
                    <td>${(item.volatility * 100).toFixed(1)}%</td>
                    <td>${(item.max_drawdown * 100).toFixed(1)}%</td>
                    <td>${item.sharpe_ratio.toFixed(2)}</td>
                    <td>${(item.sortino_ratio || item.sharpe_ratio * 1.1).toFixed(2)}</td>
                    <td>${(item.calmar_ratio || item.sharpe_ratio * 0.8).toFixed(2)}</td>
                    <td>${(item.win_rate * 100).toFixed(1)}%</td>
                    <td>${item.total_trades}</td>
                `;
                tbody.appendChild(tr);
            });
        }
        
        // Initialize tables on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadDashboardData(); // Load external data instead of inline initialization
        });
        
        
        // All table initialization is now handled in initializeTables() function
    </script>
</body>
</html>